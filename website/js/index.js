const handleDrag=function(){const t={init:function(){const t=document.querySelectorAll("[draggable=true]");for(let e=0;e<t.length;e++){const n=t[e];this.setDragListenersForItem(n)}const e=document.querySelectorAll("ul");for(let t=0;t<e.length;t++){const n=e[t];n.addEventListener("dragover",this.dragOver,!1),n.addEventListener("dragleave",this.dragLeave,!1),n.addEventListener("drop",this.drop,!1)}},setDragListenersForItem:function(t){t.addEventListener("dragstart",this.start,!1),t.addEventListener("dragend",this.end,!1),t.addEventListener("mouseover",this.startFeedForwards,!1),t.addEventListener("mouseout",this.endFeedForwards,!1)},startFeedForwards:function(t){},endFeedForwards:function(t){},start:function(t){console.log("start"),t.dataTransfer.effectAllowed="copy",t.target.classList.add("dragged"),t.target.parentElement.classList.contains("drop-container")?(t.dataTransfer.setData("text/plain",t.target.parentElement.parentElement.id),t.target.parentElement.parentElement.classList.add("start-drag-list")):(t.dataTransfer.setData("text/plain",t.target.parentElement.id),t.target.parentElement.classList.add("start-drag-list")),document.getElementsByTagName("body")[0].classList.add("dragging-enabled")},end:function(t){console.log("end"),t.target.classList.remove("dragged"),document.getElementsByTagName("body")[0].classList.remove("dragging-enabled"),document.getElementsByClassName("start-drag-list")[0].classList.remove("start-drag-list")},dragOver:function(t){return document.getElementById(t.dataTransfer.getData("text/plain"))==t.target?t.dataTransfer.dropEffect="none":t.target.classList.contains("drag-copy")?t.dataTransfer.dropEffect="copy":t.target.classList.contains("drag-move")?t.dataTransfer.dropEffect="move":t.target.classList.contains("drag-delete")&&(t.dataTransfer.dropEffect="copy"),t.preventDefault(),!1},dragLeave:function(t){console.log("leave")},drop:function(e){e.stopPropagation&&e.stopPropagation();const n=document.getElementById(e.dataTransfer.getData("text/plain"));if(n!=e.target){const a=n.getElementsByClassName("dragged")[0];if(e.target.classList.contains("drag-move"))e.target.appendChild(a);else if(e.target.classList.contains("drag-copy")){const n=a.cloneNode(!0);n.classList.remove("dragged"),setTimeout(function(){t.setDragListenersForItem(n)});let r=e.target;const s=r.getElementsByClassName("drop-container")[0];void 0!=s&&(r=s),r.appendChild(n)}else e.target.classList.contains("drag-delete")&&a.parentElement.removeChild(a)}return e.preventDefault(),!1}};return t.init(),t}();window.addEventListener("scroll",function(){const t=this.scrollY,e=(this.scrollX,document.querySelector("body > header").getBoundingClientRect());console.log("top:",t,"height:",e.height);let n=e.height-t;n<0&&(n=0)}),window.addEventListener("load",function(){const t=[{content:function(t){const e=[];for(let n=0;n<t.length;n++){const a=document.createElement("li");a.setAttribute("draggable","true"),e[e.length]={element:a,data:t[n]},handleDrag.setDragListenersForItem(a)}return e},type:"function",children:[{content:"h3",type:"tag",child:{type:"function",content:function(t,e){e.textContent=t.title}}},{content:"img",type:"tag",child:{type:"function",content:function(t,e){e.src="http://image.tmdb.org/t/p/w185/"+t.poster_path,e.alt=t.title}}}]}];fetch("https://api.themoviedb.org/3/discover/movie?primary_release_date.gte=2014-09-15&primary_release_date.lte=2014-10-22&api_key=91e0bf2847df0304e6f6dc4be0546cf2").then(function(t){return t.json()}).then(function(e){console.log(e),console.log("templateEngine",templateEngine,e),templateEngine.render(t,document.getElementById("shop-list"),e.results)}).catch(function(t){console.log(t)})});